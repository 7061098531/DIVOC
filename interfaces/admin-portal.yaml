swagger: '2.0'
info:
  version: 1.0.0
  title: Divoc Portal API
  description: Digital infra for vaccination certificates
securityDefinitions:
  isUser:
    type: apiKey
    name: Authorization
    in: header
  isAdmin:
    type: apiKey
    name: Authorization
    in: header
  isFacilityAdmin:
    type: apiKey
    name: Authorization
    in: header
security:
  - isUser: []
consumes:
  - application/json
produces:
  - application/json
paths:
  /facilities:
    post:
      summary: Upload facility csv for bulk ingestion
      consumes:
        - multipart/form-data
      parameters:
        - in: formData
          name: file
          type: file
          description: Facility data in the form of csv
      responses:
        '200':
          description: OK
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
  /vaccinators:
    post:
      summary: Upload facility csv for bulk ingestion
      consumes:
        - multipart/form-data
      parameters:
        - in: formData
          name: file
          type: file
          description: Facility data in the form of csv
      responses:
        '200':
          description: OK
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
  /program:
    post:
      summary: Create program
      operationId: createProgram
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ProgramRequest'
          description: Vaccination Program
      responses:
        '200':
          description: OK
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
  /medicine:
    post:
      summary: Create Medicine
      operationId: createMedicine
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/CreateMedicineRequest'
          description: Facility data in the form of csv
      responses:
        '200':
          description: OK
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
definitions:
  ProgramRequest:
    type: object
    properties:
      name:
        type: string
      description:
        type: string
      logoURL:
        type: string
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      status:
        type: string
        enum:
          - Active
          - Inactive
      medicineIds:
        type: array
        items:
          type: string
  CreateMedicineRequest:
    type: object
    properties:
      name:
        type: string
      provider:
        type: string
      schedule:
        type: object
        properties:
          repeatTimes:
            type: number
            description: How many times vaccination should be taken
          repeatInterval:
            type: number
            description: Number of times the vaccination should be taken.
      effectiveUntil:
        type: number
        description: Effective until n months after the full vaccination schedule is completed
      status:
        type: string
        enum:
          - Active
          - Inactive
          - Blocked
      price:
        type: number
        description: Indicative price if fixed or max price available.


host: divoc.xiv.in
schemes:
  - https
basePath: /divoc/admin/api/v1
